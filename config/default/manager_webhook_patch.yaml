apiVersion: apps/v1
kind: Deployment
metadata:
  name: controller-manager
  namespace: system
spec:
  template:
    spec:
      containers:
      - name: webhook
        # Replace this with the built image name
        image: quay.io/mpaulgreen/webhook0.0.1
        imagePullPolicy: Always
        ports:
          - containerPort: 9443        
        volumeMounts:
        - mountPath: /etc/certs
          name: webhook-cert
          readOnly: true
      volumes:
      # This assumes there is a secret called webhook-cert containing TLS certificates
      # Projects like cert-manager can create these certificates
      - name: webhook-cert
        secret:
          defaultMode: 420
          secretName: webhook-server-cert